import Slack from 'slack-node';
import schedule from 'node-schedule';

// WebHooks url
const url =
	'https://hooks.slack.com/services/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';

const slack = new Slack();
slack.setWebhook(url);

// create function to send message
const send = async (text) => {
	slack.webhook(
		{
			// bot name
			username: 'to-do',
			text: text,
			// channel, it can be replaced as '\"[channel_name]\"'
			// you can check the channel code from url
			// example: https://[yourSlack].slack.com/client/TTY23TY019/C012J5JPKQT
			// the last part of whole url such as 'C012J5JPKQT' is the channel code
			channel: 'C012J5JPKQT',
		},
		// function to send error message
		function (error, response) {
			console.log(response);
		}
	);
};

// Make sure this bot works successfully.
send('Deeeeeeeeeeeeeeeeeeeeeeeer');

/* 
   Set a schedule you want
   schedule.scheduleJob([option sec], min, hours, days, months, period)
   * means everything
*/

// Set time to check now ( set time 16:32 pm )
schedule.scheduleJob('32 16 * * 1-5', function () {
	send('기상');
});